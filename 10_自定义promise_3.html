<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <!-- <script src="./lib/Promise.js"></script> -->
  <script src="./lib/Promise_class.js"></script>
  <script>
    // 延迟指定的时间才执行成功的promise
    const p0 = Promise.resolveDelay(0,100)
    const p1 = Promise.resolve(3)
    const p2 = Promise.resolve(Promise.resolve(4))
    const p3 = Promise.resolve(Promise.reject(5))
    const p4 = Promise.reject(6)
    // 延迟指定的时间才执行失败的promise
    const p5 = Promise.rejectDelay(7,2000)
    // p1.then(value => { console.log('p1 value', value) })
    // p2.then(value => { console.log('p2 value', value) })
    // p3.catch(reason => { console.log('p3 reason', reason) })
    // p4.catch(reason => { console.log('p4 reason', reason) })

    // race()传递的数组中第一个返回状态的就是最终结果,返回一个promise对象
    // const racePromise = Promise.race([p0,p1,p4])
    // const racePromise = Promise.race([p0,p4,p1])
    // racePromise.then(
    //   value => {console.log('race onResolved()', value)},
    //   reason => {console.log('race onRejected()', reason)}
    // )

    // all()传递的数组中promise对象只有全部成功才成功,有一个失败就是失败的结果状态,返回一个promise对象,传递的值是values数组(按照传递promise顺序)
    // const allPromise = Promise.all([p0,p1])
    // const racePromise = Promise.all([p0,p1,p4])
    const allPromise = Promise.all([p5,p1])
    allPromise.then(
      value => {console.log('all onResolved()', value)},
      reason => {console.log('all onRejected()', reason)}
    )

  </script>
</body>

</html>